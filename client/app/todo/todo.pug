.container
  .panel.panel-default
    .panel-heading ToDo
    .panel-body
      table.table.table-hover
        thead
          tr
            th.col-xs-1
            th.col-xs-3 task
            th.col-xs-2 group
            th.col-xs-3 due
            th.col-xs-1 completed
            th.col-xs-1 owner
            th.col-xs-1
        tbody
          tr
            td
            td
              input.form-control(type="text" ng-model="todoCtrl.newTodo.name")
            td
              input.form-control(type="text" ng-model="todoCtrl.newTodo.group")
            td
              .btn-group
                button.btn.btn-default(href="#" editable-bsdate="todoCtrl.newTodo.due" e-is-open="todoCtrl.datePickerOpen['edit']" e-ng-click="todoCtrl.toggleDatePicker($event, 'edit')" e-datepicker-popup="yyyy/MM/dd") {{ (todoCtrl.newTodo.due | date : 'yyyy/MM/dd ') || 'empty' }}
                button.btn.btn-default(href="#" editable-bstime="todoCtrl.newTodo.due" e-show-meridian="false" ) {{ (todoCtrl.newTodo.due | date : 'HH:mm') || 'empty' }}
            td
            td
            td
              button.btn.btn-primary.glyphicon.glyphicon-plus(ng-click="todoCtrl.addTodo()")
        tbody(ng-repeat="(key, value) in todoCtrl.todos | groupBy: 'group'")
          tr
            td(colspan="7" ng-click="isCollapsed = !isCollapsed")
              b {{ key }}
          tr(uib-collapse="isCollapsed" ng-repeat="todo in value | filter:{done:todoCtrl.doneFilter}")
            td
              input(type="checkbox" ng-model="todo.done" ng-change="todoCtrl.updateTodo(todo)")
            td
              a(href="#" editable-text="todo.name" onaftersave="todoCtrl.updateTodo(todo)") {{ todo.name || 'empty' }}
            td
              a(href="#" editable-text="todo.group" onaftersave="todoCtrl.updateTodo(todo)") {{ todo.group || 'empty' }}
            td
              .btn-group
                button.btn.btn-default(href="#" editable-bsdate="todo.due" e-is-open="todoCtrl.datePickerOpen['edit']" e-ng-click="todoCtrl.toggleDatePicker($event, 'edit')" e-datepicker-popup="yyyy/MM/dd" onaftersave="todoCtrl.updateTodo(todo)") {{ (todo.due | date : 'yyyy/MM/dd ') || 'empty' }}
                button.btn.btn-default(href="#" editable-bstime="todo.due" e-show-meridian="false" onaftersave="todoCtrl.updateTodo(todo)") {{ (todo.due | date : 'HH:mm') || 'empty' }}
            td {{ todo.doneDate | date : 'yyyy/MM/dd HH:mm' }}
            td {{ todo.user.name }}
            td
              button.btn.btn-danger.glyphicon.glyphicon-trash(ng-click="todoCtrl.deleteTodo(todo)")

      div(data-toggle="buttons")
        label.btn.btn-default(ng-class="{active:todoCtrl.showDone}")
          input(type="checkbox" ng-model="todoCtrl.showDone" ng-change="todoCtrl.toggleDoneFilter()")
          | show completed tasks
